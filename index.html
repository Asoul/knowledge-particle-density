<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Knowledge Particle Density</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  
  <!-- Facebook Settings -->
  <meta property="og:type"   content="website" />
  <meta property="og:url"    content="http://asoul.github.io/knowledge-particle-density" />
  <meta property="og:title"  content="Knowledge Particle Density" />
  <meta property="og:description"  content="A demo website for Knowledge Particle Density." />
  <meta property="og:image"  content="http://asoul.github.io/knowledge-particle-density/images/favicon.png" />

  <link rel="icon" type="image/png" href="http://asoul.github.io/knowledge-particle-density/images/favicon.png">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/components/icon.min.css">
  <style type="text/css">
  body {
    background-color: #FFFFFF;
  }
  .ui.inverted.menu {
    border-radius: 0;
  }
  h1.ui.header.header {
    margin-top: 2em;
    margin-bottom: 2em;
  }
  .ui p {
    line-height: 2em;
  }
  .ui.menu .item img.logo {
    margin-right: 1.5em;
  }
  .ui.container {
    font-size: 1.6em;
  }
  .main.container {
    margin-top: 3em;
    margin-bottom: 6em;
  }
  .wireframe {
    margin-top: 2em;
  }
  .ui.footer.segment {
    margin: 5em 0em 0em;
    padding: 5em 0em;
  }
  </style>
</head>
<body ng-app="kpd">
  <div class="ui inverted menu stackable">
    <div class="ui container">
      <a ui-sref="about" class="header item">
        <img src="images/favicon.png" class="logo">
        About KPD
      </a>
      <a ui-sref="samples.sample1" class="item">Samples</a>
      <a ui-sref="discussion" class="item">Discussion</a>
      <a ui-sref="contact" class="item">Contact</a>
    </div>
  </div>
  <div class="ui main text container">
    <div ui-view></div>
  </div>

<script src="http://code.jquery.com/jquery-1.12.3.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="http://angular-ui.github.io/ui-router/release/angular-ui-router.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.js"></script>

<script>
  angular.module('kpd', ['ui.router'])
    .config(function($stateProvider, $urlRouterProvider) {
      $urlRouterProvider.otherwise("/about")
      $stateProvider
        .state('about', {
          url: "/about",
          templateUrl: "templates/about.html"
        })
        .state('samples', {
          url: "/samples",
          templateUrl: "templates/samples.html",
          controller: function($scope, $timeout) {
            var kps = 3
            $('.ui.secondary.menu > .item').on('click', function(event) {
              $('.ui.secondary.menu > .item').removeClass('active')
              $(this).addClass('active')
            })
            initActiveItem = function() {
              var index = window.location.hash.slice(-1)
              var element = $('.ui.secondary.menu > .item')[parseInt(index) - 1]
              $(element).addClass('active')
            }
            updateText = function() {
              $('span').each(function(index, element) {
                if ($(element).attr('data-level') <= kps) {
                  $(element).show()
                } else {
                  $(element).hide()
                }
              })
            }
            $scope.changeKPD = function(delta) {
              kps += delta
              kps = Math.min(kps, 5)
              kps = Math.max(kps, 1)
              $('#kps-text').attr('data-text', kps)
              updateText()
            }
            $timeout(function(){
              initActiveItem()
              $scope.changeKPD(0)  
            })
          }
        })
        .state('discussion', {
          url: "/discussion",
          templateUrl: "templates/discussion.html"
        })
        .state('contact', {
          url: "/contact",
          templateUrl: "templates/contact.html"
        })
        .state('samples.sample1', {
          url: "/sample1",
          templateUrl: "templates/samples/sample1.html"
        })
        .state('samples.sample2', {
          url: "/sample2",
          templateUrl: "templates/samples/sample2.html"
        })
    })
</script>
</body>
</html>